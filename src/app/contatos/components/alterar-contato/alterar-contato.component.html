<app-menu-superior></app-menu-superior>
<div class="container main-container">
  <h2>Alterar Contato</h2>
  <hr />

  <form novalidate (ngSubmit)="alterarContato()" [formGroup]="contatoForm">

    <div class="form-horizontal">

      <div class="alert alert-danger" *ngIf="errors.length > 0">
        <h3 id="msgRetorno">Opa! Alguma coisa não deu certo:</h3>
        <ul>
          <li *ngFor="let error of errors">{{ error }}</li>
        </ul>
      </div>

      <div class="form-group" [ngClass]="{'has-error': displayMessage.nome }">
        <label class="col-md-2 control-label" for="nome">Nome</label>
        <div class="col-md-10">
          <input class="form-control" id="nome" type="text" placeholder="Nome" formControlName="nome" />
          <span class="text-danger" *ngIf="displayMessage.nome">
              <p [innerHTML]="displayMessage.nome"></p>
        </span>
        </div>
      </div>

      <div class="form-group" [ngClass]="{'has-error': displayMessage.email }">
        <label class="col-md-2 control-label" for="email">E-mail</label>
        <div class="col-md-10">
          <input class="form-control" type="text" placeholder="E-mail" formControlName="email" />
          <span class="text-danger" *ngIf="displayMessage.email">
              <p [innerHTML]="displayMessage.email"></p>
        </span>
        </div>
      </div>

      <div class="form-group" [ngClass]="{'has-error': displayMessage.dataNascimento }">
        <label class="col-md-2 control-label">Data de Nascimento</label>
        <div class="col-md-10">
          <my-date-picker name="dataNascimento" [options]="myDatePickerOptions" formControlName="dataNascimento"></my-date-picker>
          <span class="text-danger" *ngIf="displayMessage.dataNascimento">
              <p [innerHTML]="displayMessage.dataNascimento"></p>
        </span>
        </div>
      </div>

      <div id="EnderecoPartial">
        <hr>
        <h3>Endereço do Contato</h3>

        <div class="form-group" [ngClass]="{'has-error': displayMessage.logradouro }">
          <label class="col-md-2 control-label" for="logradouro">Logradouro</label>
          <div class="col-md-10">
            <input class="form-control" type="text" placeholder="Logradouro" formControlName="logradouro" />
            <span class="text-danger" *ngIf="displayMessage.logradouro">
                <p [innerHTML]="displayMessage.logradouro"></p>
          </span>
          </div>
        </div>

        <div class="form-group" [ngClass]="{'has-error': displayMessage.numero }">
          <label class="col-md-2 control-label" for="numero">Número</label>
          <div class="col-md-10">
            <input class="form-control" type="text" placeholder="Número" formControlName="numero" />
            <span class="text-danger" *ngIf="displayMessage.numero">
                <p [innerHTML]="displayMessage.numero"></p>
          </span>
          </div>
        </div>

        <div class="form-group">
          <label class="col-md-2 control-label">Complemento</label>
          <div class="col-md-10">
            <input class="form-control" type="text" placeholder="Complemento" formControlName="complemento" />
          </div>
        </div>

        <div class="form-group" [ngClass]="{'has-error': displayMessage.bairro }">
          <label class="col-md-2 control-label" for="bairro">Bairro</label>
          <div class="col-md-10">
            <input class="form-control" type="text" placeholder="Bairro" formControlName="bairro" />
            <span class="text-danger" *ngIf="displayMessage.bairro">
                <p [innerHTML]="displayMessage.bairro"></p>
          </span>
          </div>
        </div>

        <div class="form-group" [ngClass]="{'has-error': displayMessage.cep }">
          <label class="col-md-2 control-label" for="cep">CEP</label>
          <div class="col-md-10">
            <input class="form-control" type="text" placeholder="CEP" formControlName="cep" />
            <span class="text-danger" *ngIf="displayMessage.cep">
                <p [innerHTML]="displayMessage.cep"></p>
          </span>
          </div>
        </div>

        <div class="form-group" [ngClass]="{'has-error': displayMessage.cidade }">
          <label class="col-md-2 control-label" for="cidade">Cidade</label>
          <div class="col-md-10">
            <input class="form-control" type="text" placeholder="Cidade" formControlName="cidade" />
            <span class="text-danger" *ngIf="displayMessage.cidade">
                <p [innerHTML]="displayMessage.cidade"></p>
            </span>
          </div>
        </div>

        <div class="form-group" [ngClass]="{'has-error': displayMessage.estado }">
          <label class="col-md-2 control-label">Estado</label>
          <div class="col-md-10">
            <select class="form-control" formControlName="estado">
              <option value="">Selecione</option>
              <option value="AC">Acre</option>
              <option value="AL">Alagoas</option>
              <option value="AP">Amapá</option>
              <option value="AM">Amazonas</option>
              <option value="BA">Bahia</option>
              <option value="CE">Ceará</option>
              <option value="DF">Distrito Federal</option>
              <option value="ES">Espírito Santo</option>
              <option value="GO">Goiás</option>
              <option value="MA">Maranhão</option>
              <option value="MT">Mato Grosso</option>
              <option value="MS">Mato Grosso do Sul</option>
              <option value="MG">Minas Gerais</option>
              <option value="PA">Pará</option>
              <option value="PB">Paraíba</option>
              <option value="PR">Paraná</option>
              <option value="PE">Pernambuco</option>
              <option value="PI">Piauí</option>
              <option value="RJ">Rio de Janeiro</option>
              <option value="RN">Rio Grande do Norte</option>
              <option value="RS">Rio Grande do Sul</option>
              <option value="RO">Rondônia</option>
              <option value="RR">Roraima</option>
              <option value="SC">Santa Catarina</option>
              <option value="SP">São Paulo</option>
              <option value="SE">Sergipe</option>
              <option value="TO">Tocantins</option>
            </select>
            <span class="text-danger" *ngIf="displayMessage.estado">
                <p [innerHTML]="displayMessage.estado"></p>
            </span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="col-md-4 col-md-offset-2">
          <span><button class="btn btn-success" type="submit" [disabled]='!contatoForm.valid'>Alterar</button></span>
          <a [routerLink]="['/contatos']" class="btn btn-primary">Voltar para a lista</a>
        </div>
      </div>
    </div>
  </form>

  <div id="TelefonePartial">
    <hr>
    <h3>Telefones</h3>

    <table class="table">
      <tr>
        <th>
          <button type="button" class="btn btn-info" (click)='showModal(null)'>
            <span title="Adicionar Telefone" class="glyphicon glyphicon-plus-sign"></span> Adicionar Telefone
          </button>
        </th>
      </tr>
    </table>

    <table class="table table-hover">
      <thead>
        <tr>
          <th>DDD</th>
          <th>Numero</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor='let telefone of contato.telefones'>
          <td>
            {{ telefone.ddd }}
          </td>
          <td>
            {{ telefone.numero }}
          </td>
          <td>
            <div>
              <button type="button" class="btn btn-info" (click)='showModal(telefone)'>
                <span title="Alterar Telefone" class="glyphicon glyphicon-plus-pencil"></span> Alterar Telefone
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>


  <div id="myModal" class="modal fade in" [ngStyle]="{'display': modalVisible ? 'block' : 'none'}">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button (click)='hideModal()' type="button" class="close" data-dismiss="modal">
        <span aria-hidden="true">×</span><span class="sr-only">Fechar</span>
        </button>
          <h4 class="modal-title">{{tituloModal}}</h4>
        </div>
        <form novalidate (ngSubmit)="adicionarTelefone()" [formGroup]="telefoneForm">
          <div class="modal-body">
            <div class="form-horizontal">

              <div class="alert alert-danger" *ngIf="errorsTelefone.length > 0">
                <h3 id="msgRetorno">Opa! Alguma coisa não deu certo:</h3>
                <ul>
                  <li *ngFor="let error of errorsTelefone">{{ error }}</li>
                </ul>
              </div>

              <div class="form-group">
                <label class="col-md-2 control-label">DDD</label>
                <div class="col-md-10">
                  <input class="form-control" type="text" placeholder="DDD" formControlName="ddd" />
                </div>
              </div>

              <div class="form-group">
                <label class="col-md-2 control-label">Número</label>
                <div class="col-md-10">
                  <input class="form-control" type="text" placeholder="Numero" formControlName="numero" />
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <div class="col-md-offset-2 col-md-10">
              <span><button class="btn btn-success" type="button" (click)='salvarTelefone()' [disabled]='!telefoneForm.valid'>{{tituloModal}}</button></span>
              <input type="button" class="btn btn-info" value="Fechar" (click)='hideModal()' />
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>